---
language: ruby
script: bundle exec middleman build

env:
  global:
    - GIT_COMMITTER_NAME=digitalnomads
    - GIT_COMMITTER_EMAIL=info@nomadwiki.net
    - GIT_AUTHOR_NAME=digitalnomads
    - GIT_AUTHOR_EMAIL=info@nomadwiki.net
    - secure: "fbe1afb5049312a31c79028040dad18698bfc9cb"

before_script:
  - git clone --quiet https://github.com/digitalnomads/digitalnomads.github.io
  - git checkout -b master

after_success:
  - cd build
  - git add -A
  - git commit -m 'Update'
  - '[ "$TRAVIS_BRANCH" == "source" ] && [ $GH_TOKEN ] && git push --quiet https://$GH_TOKEN@github.com/digitalnomads/digitalnomads.github.io.git master 2> /dev/null'

